{
    "componentChunkName": "component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx",
    "path": "/ssh-host-key-mismatch-after-server-reinstallation",
    "result": {"data":{"post":{"slug":"/ssh-host-key-mismatch-after-server-reinstallation","title":"Technical Notes: SSH Host Key Mismatch After Server Reinstallation","date":"25.06.2024","tags":[{"name":"Homelab","slug":"homelab"},{"name":"Proxmox","slug":"proxmox"},{"name":"Linux","slug":"linux"}],"description":null,"canonicalUrl":null,"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"slug\": \"ssh-host-key-mismatch-after-server-reinstallation\",\n  \"title\": \"Technical Notes: SSH Host Key Mismatch After Server Reinstallation\",\n  \"date\": \"2024-06-25T00:00:00.000Z\",\n  \"tags\": [\"Homelab\", \"Proxmox\", \"Linux\"]\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h3\", null, \"Overview\"), mdx(\"p\", null, \"After reinstalling a Linux server but keeping the original static IP address, I encountered an SSH warning that looked alarming at first glance \\u2014 but it was actually a standard and solvable issue.\"), mdx(\"p\", null, \"This post documents what happened, why it happened, and how to fix it \\u2014 all while making sure you stay secure and don\\u2019t fall into bad habits when managing your fleet of remote machines.\"), mdx(\"p\", null, \"\\u2E3B\"), mdx(\"h3\", null, \"The Problem\"), mdx(\"p\", null, \"Right after reinstalling a server with the same IP (192.168.0.200), I tried to SSH into it from my local machine (which had connected to the old one before):\"), mdx(\"p\", null, \"ssh \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"mailto:root@192.168.0.200\"\n  }, \"root@192.168.0.200\")), mdx(\"p\", null, \"Instead of a login prompt, I was greeted with this:\"), mdx(\"p\", null, \"@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\\n@    WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!     @\\n@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\\nIT IS POSSIBLE THAT SOMEONE IS DOING SOMETHING NASTY!\\nOffending ECDSA key in /Users/kyngo/.ssh/known_hosts:47\\nHost key for 192.168.0.200 has changed and you have requested strict checking.\"), mdx(\"p\", null, \"\\u2E3B\"), mdx(\"h3\", null, \"Root Cause\"), mdx(\"p\", null, \"SSH performs host verification to protect against man-in-the-middle attacks. When you connect to a server, the SSH client compares the host key it receives with the one saved in your ~/.ssh/known_hosts file.\"), mdx(\"p\", null, \"Because I had reinstalled the OS, the SSH daemon on the server generated new host keys, so the fingerprint no longer matched the one cached earlier.\"), mdx(\"p\", null, \"From SSH\\u2019s perspective, someone could be impersonating my server. Which is the correct behavior \\u2014 security first.\"), mdx(\"p\", null, \"\\u2E3B\"), mdx(\"h3\", null, \"The Fix\"), mdx(\"p\", null, \"Since I knew this was a fresh install and not a security threat, the fix was simple:\"), mdx(\"p\", null, \"ssh-keygen -R 192.168.0.200\"), mdx(\"p\", null, \"This command removes the stored key from known_hosts.\"), mdx(\"p\", null, \"Then I retried:\"), mdx(\"p\", null, \"ssh \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"mailto:root@192.168.0.200\"\n  }, \"root@192.168.0.200\")), mdx(\"p\", null, \"It asked me to confirm the new fingerprint:\"), mdx(\"p\", null, \"The authenticity of host '192.168.0.200 (192.168.0.200)' can't be established.\\nED25519 key fingerprint is SHA256:9msfF1XHtvuGQp9bT+zHqeChiwkDvs3t/HfcmZf9rmU.\\nAre you sure you want to continue connecting (yes/no)? yes\"), mdx(\"p\", null, \"I typed yes, and everything was back to normal.\"), mdx(\"p\", null, \"\\u2E3B\"), mdx(\"h3\", null, \"Pro Tip: When You Should Be Concerned\"), mdx(\"p\", null, \"If you didn\\u2019t reinstall the server or change anything on your end, and still see this warning \\u2014 stop. Someone may be spoofing the server, or it could have been compromised.\"), mdx(\"p\", null, \"Always verify fingerprints manually or through a secure channel if you\\u2019re unsure.\"), mdx(\"p\", null, \"\\u2E3B\"), mdx(\"h3\", null, \"Closing Notes\"), mdx(\"p\", null, \"SSH\\u2019s host key verification is an underrated hero in daily server ops. Don\\u2019t disable it \\u2014 embrace it. It saved countless admins from talking to the wrong machine, or worse.\"));\n}\n;\nMDXContent.isMDXComponent = true;","excerpt":"Overview After reinstalling a Linux server but keeping the original static IP address, I encountered an SSH warning that looked alarming atâ€¦","timeToRead":1,"banner":null}},"pageContext":{"slug":"/ssh-host-key-mismatch-after-server-reinstallation","formatString":"DD.MM.YYYY"}},
    "staticQueryHashes": ["2744905544","3090400250","318001574"]}