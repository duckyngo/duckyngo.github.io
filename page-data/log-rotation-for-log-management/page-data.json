{
    "componentChunkName": "component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx",
    "path": "/log-rotation-for-log-management",
    "result": {"data":{"post":{"slug":"/log-rotation-for-log-management","title":"Technical Notes: Configuring Log Rotation for Log Management","date":"15.06.2024","tags":[{"name":"Linux","slug":"linux"},{"name":"MLOps","slug":"ml-ops"},{"name":"CS","slug":"cs"},{"name":"BE","slug":"be"}],"description":null,"canonicalUrl":null,"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"slug\": \"log-rotation-for-log-management\",\n  \"title\": \"Technical Notes: Configuring Log Rotation for Log Management\",\n  \"date\": \"2024-06-15T00:00:00.000Z\",\n  \"tags\": [\"Linux\", \"MLOps\", \"CS\", \"BE\"]\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"Log rotation is essential for managing log files in production systems, ensuring that logs do not consume excessive disk space while maintaining accessibility for troubleshooting and analytics. Recently, I configured log rotation for our microservice system. Below are my detailed notes and configurations, which can serve as a guide for implementing log rotation in your environment.\"), mdx(\"hr\", null), mdx(\"h3\", null, \"Why Log Rotation?\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Prevents log files from consuming too much disk space.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Ensures old logs are archived for future reference.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Allows processes to continue logging without interruptions.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Customizable settings for different services and environments.\")), mdx(\"hr\", null), mdx(\"h3\", null, \"Configuration Overview\"), mdx(\"h4\", null, \"1. Log Rotation for Realtime Microservices\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Purpose\"), \": Manage logs generated by the realtime services.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Configuration file\"), \": \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"/etc/logrotate.d/realtime_logs\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Settings\"), \":\", mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"/path/to/realtime-service/logs/*.log {\\n    su root root\\n    size 10M\\n    rotate 9999999\\n    missingok\\n    notifempty\\n    copytruncate\\n}\\n\")), mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Key Settings\"), \":\", mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"size 10M\"), \": Rotate logs when they reach 10 MB.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"rotate 9999999\"), \": Retain a very high number of old logs (effectively unlimited).\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"missingok\"), \": Skip missing files without generating errors.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"notifempty\"), \": Avoid rotating empty logs.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"copytruncate\"), \": Truncate the log file after rotation.\")))))), mdx(\"h4\", null, \"2. Rotating NGINX Logs\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Purpose\"), \": Rotate logs for the NGINX web server.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Configuration file\"), \": \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"/etc/logrotate.d/nginx\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Settings\"), \":\", mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"/var/log/nginx/*.log {\\n    daily\\n    rotate 10\\n    missingok\\n    notifempty\\n    compress\\n    delaycompress\\n    create 0640 nginx root\\n    sharedscripts\\n    postrotate\\n        if [ -f /run/nginx.pid ]; then\\n            kill -USR1 `cat /run/nginx.pid`\\n        fi\\n    endscript\\n}\\n\")), mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Additional Features\"), \":\", mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"compress\"), \": Compress old logs to save space.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"postrotate\"), \": Reload NGINX to ensure it uses new log files.\")))))), mdx(\"hr\", null), mdx(\"h3\", null, \"Scheduling Log Rotation with Cron\"), mdx(\"p\", null, \"To automate log rotation, the following cron jobs were added to rotate logs every hour:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"0 * * * * /usr/sbin/logrotate /etc/logrotate.d/realtime_logs\\n\")), mdx(\"p\", null, \"For daily rotation, you can modify the schedule accordingly.\"), mdx(\"hr\", null), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"321px\"\n    }\n  }, \"\\n      \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"146.66666666666669%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAdCAYAAACqhkzFAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAEwklEQVRIx32VWW/bRhSFhaRI0ce6tiRS1MKdWkiKq0RxEVfJkZzUdhLEBQoE7mPfWqAvRf/7KeZKSuIlebia4Qw5+nDPuXdaPyb3ONv8Cf7Xv2D+/h/kd//gVfIHfojvvx+re7x8Jlo/Le9wnn/Cz/knJPf/wvvtb7TmN3jhvqN46b3HC+cwZ+PL4/gq/PhstDrCEANlDCeMIEga5IkNy1tgbDowTBeKMcV07mFszmE6ASbzABPLRVcYod0bovMoWly3A0kUMTZ0RMsQ8SqC67oIPRdzew7XsRGGAZahT3umaWFbV+j3eLQvLtDttB9Ei+M4jEQJlm1hNBpBUVQYxhiqokBWFEiSBF3TIckydE2Drutg33Q6HXS7XXQeRYvrdunl6WyKKFoiiRME4QKLIIDn+fA8F2EQwPU82KaJqq6hayrOzs7oQDr0eHiXDuS6RGgzQlGEoeuQJBGGYWA4HEFTVajHYHSyrGAymUKWpCeHdU+EoiTDNE0Y4zGqqkaWJkiSGJ7vI/R9VE2NJE2QMnrfRxwnSFYrdNoXDw47EnIYjUTMZlMMBgMiEUURiqIQIaNlc1mWocgy7amqRs/su3a7/ZmUxTGHChzXwWQ2Q7PZIF+nWK/X8IMQ0SKktWydIc/WWC6WSJIUVVHSwRePKFv6ZIKZZcPxPExmJuauB9Oew5o7tM7Cdj3YjgvbcTA12bsBHM+nPc0YQxt/idbUsuAvV7i8ukJSFPjw8Q7Xtze4vn2HcnOJ3X6P93d3eHNzg+ubW+yu3uDq7TVu339AXlYwpjNMLftztPr9AdlG1TQMRyNomkbeY35UVBWSdNhjnlQovxJUTYduGPQd3+uhJwifo8USKSsqolWEqWliu92iLNYoiwKO6yGOlthst1gXOcp1jni1QpatUZUVbMvC+fkvR0Ha6LSPlTIYDomK53lSThAEDAZDUrQvCOTP/qBPLhB6AlUUU7nf7z/1IftRVA2reAVzPsdut0Ndl2iaGq4fIEsSXO52VCFNVSNNUxRFie32EoHn4/z8/KkP2T+L4ogWGB3PceA4ntbZPlvjeJ7mp+fhcEjjNwmTNCar7PdXRLjZNPCCEOs0xev9Hs2mwbbZIGMerGpsmg3c+RwXF48IeZ6jXDCabrdDSvFHGrZ+ombPbM72ToTfzWGcxLAcB/vdHlVZYNM08IMF1ukhh3VTEyHrRmVZEmEYhoee+DiH/cGAlDv0RpFoTyH0eqQ2o2KKMypGx+qb5Z3Z5RnCgw+ZypeXr5HnGeq6ohxmSUw+LKuSVI6jFalc5gXGhoGL5wiZD5mvOJ4jP4qjEYbDwSFPgkB7bH6iZl5lXanX633p3MfxIaFtU6VkWYK6quD5IdJ4dehARY66LLGKDpXCKNn8icqnHDICpiDryLIkfiHs96GoCuXxRClKEsbGmN75psppmmBmWWjqBkmyolpmlRJHEcqqon5Y5DmiZYQ0zahiouUC7W/5kOWDBWuaiiKT6kQ1GEDTtWNuD5Qsp9PpFD2ef9CxHxJmCXXsoijo9suyDJY9xyIMsM5zxEmCdZohDEIiZDdhlhV0n3+t9LGWhxClw7+zy2o6GcMwdOqDmqrAtEzohk73s3a8/VjrOvnz62v0f1C6XZC8L8+wAAAAAElFTkSuQmCC')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"image\",\n    \"title\": \"image\",\n    \"src\": \"/static/b118917695b913bbd91a5ca67c774b94/0dd72/image.png\",\n    \"srcSet\": [\"/static/b118917695b913bbd91a5ca67c774b94/5243c/image.png 240w\", \"/static/b118917695b913bbd91a5ca67c774b94/0dd72/image.png 321w\"],\n    \"sizes\": \"(max-width: 321px) 100vw, 321px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n    \")), mdx(\"h3\", null, \"Summary\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Size-based Rotation\"), \": Rotate logs when they reach a specific size (e.g., 10 MB).\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Retention Policy\"), \": Use \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"rotate\"), \" to specify the number of old logs to keep.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Compression\"), \": Compress old logs to save space.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Error Handling\"), \":\", mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"missingok\"), \": Skip missing files without errors.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"notifempty\"), \": Skip empty logs.\"))), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Copytruncate\"), \": Enable processes to continue writing to the same log file without restarting.\")));\n}\n;\nMDXContent.isMDXComponent = true;","excerpt":"Log rotation is essential for managing log files in production systems, ensuring that logs do not consume excessive disk space while…","timeToRead":1,"banner":null}},"pageContext":{"slug":"/log-rotation-for-log-management","formatString":"DD.MM.YYYY"}},
    "staticQueryHashes": ["2744905544","3090400250","318001574"]}