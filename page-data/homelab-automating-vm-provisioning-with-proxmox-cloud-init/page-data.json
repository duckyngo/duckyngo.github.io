{
    "componentChunkName": "component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx",
    "path": "/homelab-automating-vm-provisioning-with-proxmox-cloud-init",
    "result": {"data":{"post":{"slug":"/homelab-automating-vm-provisioning-with-proxmox-cloud-init","title":"Homelab: Automating VM Provisioning with Proxmox + Cloud-Init","date":"02.05.2024","tags":[{"name":"Homelab","slug":"homelab"},{"name":"Virtualization","slug":"virtualization"},{"name":"Proxmox","slug":"proxmox"},{"name":"Automation","slug":"automation"}],"description":null,"canonicalUrl":null,"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"slug\": \"homelab-automating-vm-provisioning-with-proxmox-cloud-init\",\n  \"title\": \"Homelab: Automating VM Provisioning with Proxmox + Cloud-Init\",\n  \"date\": \"2024-05-02T00:00:00.000Z\",\n  \"tags\": [\"Homelab\", \"Virtualization\", \"Proxmox\", \"Automation\"]\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"After building my first Proxmox cluster, I started creating virtual machines manually: upload ISO, install OS, set hostname, create users, install packages, set static IP\\u2026 every single time. It was fun at first\\u2014like watching your first VM come to life. But quickly, it became repetitive, especially when I needed to spin up multiple test environments. That\\u2019s when I realized: I needed automation.\"), mdx(\"p\", null, \"Cloud-Init was the answer. Combined with Proxmox\\u2019s template system, it allowed me to launch fully-configured VMs in minutes. No more ISO uploads, no more keyboard gymnastics ~~.\"), mdx(\"p\", null, \"\\u2E3B\"), mdx(\"h3\", null, \"Step 1: Create a Base VM\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"1.  Click Create VM in Proxmox.\\n2.  Choose an ISO (I used Debian).\\n3.  Give it basic resources (CPU, RAM, Disk).\\n4.  Complete the OS installation.\\n5.  Inside the VM, install two things:\\n\\u2022   cloud-init\\n\\u2022   qemu-guest-agent\\n\")), mdx(\"p\", null, \"(You can do this with apt or just make a note to install later.)\\n6.\\tShutdown the VM.\"), mdx(\"p\", null, \"\\u2E3B\"), mdx(\"h3\", null, \"Step 2: Convert to a Template\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"1.  Right-click the VM in Proxmox sidebar.\\n2.  Choose Convert to Template.\\n\")), mdx(\"p\", null, \"Now Proxmox treats this as a reusable base for new VMs.\"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"960px\"\n    }\n  }, \"\\n      \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"88.75%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAABYlAAAWJQFJUiTwAAACCUlEQVQ4y62Uy0/bQBCH/V/3n0D0parnHnrorZfemqAK6CMlIkTCMS7GOMTrOPErT79if9UuSUR7AIL4SZ9md707Hs3OjvZp/wWv37zl3as9vnx8z8v9PQ4/f+Dg4IBGo0Gz2VTI+cnJCUIIfN8niiLCMCRJEhzHodVq0W630a4uTSzLwnUHTOKIIAhIopA4jgnXhzbItclkwnQ6ZTabbZHz0WiErutol9YV17at/uwKoazwPDWez+fkeU6WZYo0Tbcsl8stmzUZrRYlMT/134RRSDAOqKqKuq6U3VWr1QotiiMOu9+Jk0RFJFXX9c5IFUVx6/Bb91hFKPPxvzab79M/DifTKb+MNkEYqITLxbIsWRUVZbl6dMRbh3JgWBfojkHgjxkOh3hC0B/ZZFm6Uw7LskCrauh7AtOxuRl49F15yz5BGlFUNcWqepBc2ZpllqN1vZTD8wFf239ontk0Ti2Oei7H54KjnuBMLOgM5nTce1DfF3T6E7SyBtO6xrRs7P6A6xuBoyL1mKcFWVmRFg+TlTWzZX6bQ9MwMHo6YTBWJHFEkWe712FZokUZtLoGP07PMZwhui0w+kPceMFoXuLPikch93rJEk1euHlp0bsw8YMQMRzh+WMWaa4Sna+T/hByrzyjrUuT55Aqm7vFWVU11do+5enlebGJ8HmkmsPdvvZUNv1Rtq+/MEpj5kMFipMAAAAASUVORK5CYII=')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"alt text\",\n    \"title\": \"alt text\",\n    \"src\": \"/static/daf6cee66c1abd8c6c35334ec9f5f445/7d769/image.png\",\n    \"srcSet\": [\"/static/daf6cee66c1abd8c6c35334ec9f5f445/5243c/image.png 240w\", \"/static/daf6cee66c1abd8c6c35334ec9f5f445/ab158/image.png 480w\", \"/static/daf6cee66c1abd8c6c35334ec9f5f445/7d769/image.png 960w\", \"/static/daf6cee66c1abd8c6c35334ec9f5f445/728cd/image.png 1160w\"],\n    \"sizes\": \"(max-width: 960px) 100vw, 960px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n    \")), mdx(\"p\", null, \"\\u2E3B\"), mdx(\"p\", null, \"\\u2699\\uFE0F Step 3: Add Cloud-Init Support\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"1.  Right-click the template \\u2192 Clone \\u2192 Create new VM from it.\\n2.  Go to Hardware \\u2192 Add \\u2192 CloudInit Drive.\\n3.  Set QEMU Agent to \\u201CYes\\u201D in the Options tab.\\n4.  Make sure Boot Order has the CloudInit drive last.\\n\")), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"960px\"\n    }\n  }, \"\\n      \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"40.833333333333336%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABP0lEQVQoz3WRa4+bMBRE+f8/raq0VdV2uypJIA4EExsv4PCwMafC3bJSmx3pfPFjRnNv8vT5Ez++feX464WiKCJN02Ctpes6hBAcT6d4fr2WlEXB5SIQ4kxdS9TthmkatFbIqiLJroK26/hIIQTKsqRrW/Kq4awsQlvSQnFtJ2rrkb3bSVJxQDeKsCysIbzZrG/APM98+XkkLRuO5wvyppj8gjYtVa2ww8R9nHeSU6X4fhK85AVCGep2RN89yjr0feHWjWRZjjGGPM9j1XEc4kju1uKdw/t3EiE1z4czB1EhjcUMfud1XFD9ZphFQ+dcZAmBdV3/9FhXQngnqaqKPM94NWa7/a/ylpqmKVLK+PmvouEDEj+PDMMQkx/Je4/WOm487DP+WMm2Ned8NNwW8C9b2GbW9z3TNO21H73d+A1GcGeFiQtCXgAAAABJRU5ErkJggg==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"alt text\",\n    \"title\": \"alt text\",\n    \"src\": \"/static/1b77c86f1bf5085d5a3227848ca35ce3/7d769/image_clone.png\",\n    \"srcSet\": [\"/static/1b77c86f1bf5085d5a3227848ca35ce3/5243c/image_clone.png 240w\", \"/static/1b77c86f1bf5085d5a3227848ca35ce3/ab158/image_clone.png 480w\", \"/static/1b77c86f1bf5085d5a3227848ca35ce3/7d769/image_clone.png 960w\", \"/static/1b77c86f1bf5085d5a3227848ca35ce3/87339/image_clone.png 1440w\", \"/static/1b77c86f1bf5085d5a3227848ca35ce3/88b03/image_clone.png 1920w\", \"/static/1b77c86f1bf5085d5a3227848ca35ce3/dde2d/image_clone.png 2554w\"],\n    \"sizes\": \"(max-width: 960px) 100vw, 960px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n    \"), \"\\n\\u2E3B\"), mdx(\"h3\", null, \"Step 4: Set Configuration (All in the UI)\"), mdx(\"p\", null, \"In the cloned VM:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"1.  Go to the Cloud-Init tab.\\n2.  Set:\\n\\u2022   Hostname\\n\\u2022   IP Address (Static or DHCP)\\n\\u2022   Username & Password\\n\\u2022   SSH Key (optional)\\n3.  Click Regenerate Image.\\n4.  Then Start the VM.\\n\")), mdx(\"p\", null, \"Done! Your new VM boots with everything configured.\"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"960px\"\n    }\n  }, \"\\n      \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"41.66666666666667%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABB0lEQVQoz6WQ2W6DMBBF+f+fqypF6kMaApSlhBBsbINtDKfCbfrYpuqVju4smpFmkrqukFIwSMV1kHT9QNm0XG+SyS3oyUY31iOUibmZXYxHPSH1xGhmlLG0XU9yPOd0w8jzseCQd+Q3y/Fdcsha0osm62fO1yn63tv9HufRv/LBcWoGkqeXE0U38pqVZGWNmj3SzLzVLZdeoO0Saz/jMC7Q3QTJW1GgxpGqqijLklFKnLXM80QIC957ll/w3rGGgBSCJM8LhJBYa3HOEUJgA7Zte5h12ydAKU2Spil938fGXX9ZdmeX1pqkaRqEEKzryn9ljCFRSiHl58nLsnzj428eZ3/VvucDFBBr1OQTOjgAAAAASUVORK5CYII=')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"alt text\",\n    \"title\": \"alt text\",\n    \"src\": \"/static/a7c29804cde49e7b0ff3bc41add8191d/7d769/image-1.png\",\n    \"srcSet\": [\"/static/a7c29804cde49e7b0ff3bc41add8191d/5243c/image-1.png 240w\", \"/static/a7c29804cde49e7b0ff3bc41add8191d/ab158/image-1.png 480w\", \"/static/a7c29804cde49e7b0ff3bc41add8191d/7d769/image-1.png 960w\", \"/static/a7c29804cde49e7b0ff3bc41add8191d/87339/image-1.png 1440w\", \"/static/a7c29804cde49e7b0ff3bc41add8191d/88b03/image-1.png 1920w\", \"/static/a7c29804cde49e7b0ff3bc41add8191d/6ac7d/image-1.png 2268w\"],\n    \"sizes\": \"(max-width: 960px) 100vw, 960px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n    \")), mdx(\"p\", null, \"\\u2E3B\"), mdx(\"p\", null, \"\\uD83D\\uDCA1 Final Thoughts\"), mdx(\"p\", null, \"This setup saved me tons of time. Now I can create a new test VM in 30 seconds \\u2014 no terminal needed.\"), mdx(\"p\", null, \"Pro tip: you can even create multiple clones with different IPs to build a mini lab cluster easily.\"));\n}\n;\nMDXContent.isMDXComponent = true;","excerpt":"After building my first Proxmox cluster, I started creating virtual machines manually: upload ISO, install OS, set hostname, create users…","timeToRead":1,"banner":null}},"pageContext":{"slug":"/homelab-automating-vm-provisioning-with-proxmox-cloud-init","formatString":"DD.MM.YYYY"}},
    "staticQueryHashes": ["2744905544","3090400250","318001574"]}