{
    "componentChunkName": "component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx",
    "path": "/prometheus-grafana-for-monitoring-mlops",
    "result": {"data":{"post":{"slug":"/prometheus-grafana-for-monitoring-mlops","title":"Technical Notes: Setting Up Prometheus + Grafana for Monitoring ML Systems","date":"29.07.2024","tags":[{"name":"AI","slug":"ai"},{"name":"MLOps","slug":"ml-ops"}],"description":null,"canonicalUrl":null,"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"slug\": \"prometheus-grafana-for-monitoring-mlops\",\n  \"title\": \"Technical Notes: Setting Up Prometheus + Grafana for Monitoring ML Systems\",\n  \"date\": \"2024-07-29T00:00:00.000Z\",\n  \"tags\": [\"AI\", \"MLOps\"]\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"Recently, we deployed a microservice system for a Machine Learning application to an on-premises server. During the early stages of deployment, we quickly realized that monitoring was crucial to track system stability and performance metrics, especially for real-time applications. After researching various tools and solutions, we decided to deploy a Prometheus + Grafana stack to collect metrics and visualize the system's health.\"), mdx(\"p\", null, \"Here are my detailed notes from the deployment process. These notes are quite specific and serve as a technical reference for anyone looking to implement a similar monitoring setup.\"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"960px\"\n    }\n  }, \"\\n      \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"64.58333333333334%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAA7DAAAOwwHHb6hkAAADAklEQVQ4y1XKW2/aBhjGcWtqkkLDwRAwBnwEY3Mw2JxsaEvDmtKcmjRrUGkStVmbkMN6V3UX+wSrtqtd7Ov+J1yp0i5+et7n0St8GX3k6/iKr+Mlvz++5cv4ls/hFXfBNctgyafhkov+DReDG877Nyz6N8x7S+a9e970PnPk/8a+d8+sfce0dYtw5b9n2b3kpveRu/6Sy+4lg+oYrxLgV0LaZsi0FtCvBrTMENcMaRgDdlpnHHXu2XWX7LSWbDeveVL/hDBvLHjbPGfRuuDMveRN8xzXGNDUfYxyl1ftDv/uO7zutKkoXRy9h6V5TJw5L5vXTOu/MnEuGdsfCGrvEfasEw5qpxzW5hw779izT2lofRpGD8cYMmp0+WPhcDjqYGlDHKNPRfUIqyc8sz8wts4Jq+f0K2f45gJhWz9garziuXnMi8ovTCtHWOUOLWvIJNgl7M7oulOC7oynwT5+c4JecukZh4Tmgp4xx9dPaWsnNLVjhKC8Q6jMGCkveazuE6gzLM2n7oxoOCMquo+utNHVDpqy4qEpbVrKCzz1NS3lkLqyj13exSrNENrSUzx5gidv0y3+TEd+hql61JwBhtmmVHKQClUKsoVU+K5UblIrTrCLM6ryc0x5ilHYRpMmCFZ2gL0V4ORC6rkxdj5EKzWpOQElxUUuNSkqLYrlJnKpQUltUy430KQhev4Jan6Ekgsp5wKKWwMENe2ipTtooocu9tDSLqo+xN37E3fvW5SD4290Dv/GPfiLzvE/6I09CmIdOdunkPGRRI+82CGXdhGkTYtCwqaQcJATdeRUHVmqIhdt5KITKRZtFN1HNQcRueywJdpkkw2ySYdM0kZMrFgI6YcKYkwlE9fJxA0ymwbZlE42rZFN6z9kUipiSolk0jpi0iS1uWKQfKSTfKSRiKsI8bUc8fU8sVWu5aM7viYRXy98tyH/T+zHXSC2IRFb/T+UIrGNPMKDnxKsr6XJiApiuoyYWilFPZtRoy2TVqK+IuXNaF9tW1ktEtvIsvYgFfkP7jSIYsW7Iz4AAAAASUVORK5CYII=')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"login\",\n    \"title\": \"login\",\n    \"src\": \"/static/ed0af949595d19a00200236e9a267e4a/7d769/login.png\",\n    \"srcSet\": [\"/static/ed0af949595d19a00200236e9a267e4a/5243c/login.png 240w\", \"/static/ed0af949595d19a00200236e9a267e4a/ab158/login.png 480w\", \"/static/ed0af949595d19a00200236e9a267e4a/7d769/login.png 960w\", \"/static/ed0af949595d19a00200236e9a267e4a/87339/login.png 1440w\", \"/static/ed0af949595d19a00200236e9a267e4a/56ba3/login.png 1542w\"],\n    \"sizes\": \"(max-width: 960px) 100vw, 960px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n    \")), mdx(\"hr\", null), mdx(\"h3\", null, \"Why Prometheus + Grafana?\"), mdx(\"p\", null, \"We chose this combination for the following reasons:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Prometheus\"), \": Provides a robust, time-series database for collecting real-time metrics from various sources.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Grafana\"), \": Offers interactive and customizable dashboards to visualize and analyze the collected data.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Use Case\"), \": Specifically, we aimed to monitor model performance (e.g., latency, throughput) and the overall system health, including GPU usage and container metrics.\")), mdx(\"hr\", null), mdx(\"h3\", null, \"Features of the Setup\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Real-time Metrics\"), \": The stack collects data at a configurable interval (e.g., 5 seconds).\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"GPU Monitoring\"), \": Leverages NVIDIA's DCGM exporter to monitor GPU utilization and memory.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Container Monitoring\"), \": Uses cAdvisor to monitor Docker container performance.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Custom Dashboards\"), \": Grafana allows the creation of tailored visualizations for specific metrics.\")), mdx(\"hr\", null), mdx(\"h3\", null, \"Deployment Using Docker Compose\"), mdx(\"p\", null, \"The entire stack is orchestrated using Docker Compose. Below is the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"docker-compose.yml\"), \" file we used:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-yaml\"\n  }, \"version: '3.8'\\n\\nservices:\\n  cadvisor:\\n    image: google/cadvisor:latest\\n    ports:\\n      - \\\"8088:8080\\\"\\n    volumes:\\n      - /:/rootfs:ro\\n      - /var/run:/var/run:rw\\n      - /sys:/sys:ro\\n      - /var/lib/docker/:/var/lib/docker:ro\\n    networks:\\n      - monitoring\\n\\n  prometheus:\\n    image: prom/prometheus:latest\\n    volumes:\\n      - ./prometheus.yml:/etc/prometheus/prometheus.yml\\n    command:\\n      - '--config.file=/etc/prometheus/prometheus.yml'\\n    ports:\\n      - \\\"9090:9090\\\"\\n    networks:\\n      - monitoring\\n\\n  grafana:\\n    image: grafana/grafana:latest\\n    ports:\\n      - \\\"3000:3000\\\"\\n    volumes:\\n      - grafana-storage:/var/lib/grafana\\n    networks:\\n      - monitoring\\n\\n  nvidia-dcgm-exporter:\\n    image: nvidia/dcgm-exporter:latest\\n    deploy:\\n      resources:\\n        reservations:\\n          devices:\\n            - capabilities: [gpu]\\n    environment:\\n      - NVIDIA_VISIBLE_DEVICES=all\\n    ports:\\n      - \\\"9400:9400\\\"\\n    networks:\\n      - monitoring\\n\\nnetworks:\\n  monitoring:\\n    driver: bridge\\n\\nvolumes:\\n  grafana-storage:\\n\")), mdx(\"hr\", null), mdx(\"h3\", null, \"Configuring Prometheus\"), mdx(\"p\", null, \"Prometheus is configured to scrape metrics from cAdvisor and NVIDIA DCGM exporter. Here is the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"prometheus.yml\"), \" file:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-yaml\"\n  }, \"global:\\n  scrape_interval: 5s\\n\\nscrape_configs:\\n  - job_name: 'cadvisor'\\n    static_configs:\\n      - targets: ['cadvisor:8080']\\n\\n  - job_name: 'nvidia-gpu'\\n    static_configs:\\n      - targets: ['nvidia-dcgm-exporter:9400']\\n\")), mdx(\"hr\", null), mdx(\"h3\", null, \"Custom Grafana Dashboards\"), mdx(\"p\", null, \"Once Prometheus is set up, Grafana can query its data to visualize metrics. Below are some of the key panels we created:\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Docker Container Memory Usage (MB)\"), \":\"), mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Query\"), \": \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"sum(container_memory_usage_bytes{image!=\\\"\\\"}) by (name) / 1024 / 1024\"))), mdx(\"p\", {\n    parentName: \"li\"\n  }, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"960px\"\n    }\n  }, \"\\n      \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"34.166666666666664%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAA7DAAAOwwHHb6hkAAABQklEQVQoz3WQ227bMBAF9Q+1nVgSqYsp3k2JktIYadL//6spTDsF+tCHwSywi91DVjYs+LgS0kZIO/66FlJ+R7vE8VXwUsv/cnr6Pid6RSX6iUYONKL7Syt7GtFTt13xv3S0onv2Blp5Z3xYDFT3FJO2OH0haIVSCj0ppklhtMZq80SjtSFYzxo8yQW8jTjjcNbjjUNP5rGwHXRJOY6Kupuo5YVGXqg7xblTxU2nOImRRnaMQ1d8bCSHuuVQC348XclBo20kBc/sHc6Fx0XrMcZitMGYbyzBGrI3ePNIbO+vMw77nfCl7Zkmw7ZkgossaSY4x7qspHAlz5kUEimmUkcf2fLGHBN73svMfJ2JPpDiTBW8Ie8fLPsH288v8n7Dac2S39lvv0svLjfm/Vep17fPggkLow7lKw6vguNZcjpL/gDC18k9n3trDgAAAABJRU5ErkJggg==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"memory ps\",\n    \"title\": \"memory ps\",\n    \"src\": \"/static/4f38d9be8d3a7d0a1f90d4ad10c03262/7d769/memory_ps.png\",\n    \"srcSet\": [\"/static/4f38d9be8d3a7d0a1f90d4ad10c03262/5243c/memory_ps.png 240w\", \"/static/4f38d9be8d3a7d0a1f90d4ad10c03262/ab158/memory_ps.png 480w\", \"/static/4f38d9be8d3a7d0a1f90d4ad10c03262/7d769/memory_ps.png 960w\", \"/static/4f38d9be8d3a7d0a1f90d4ad10c03262/78899/memory_ps.png 1072w\"],\n    \"sizes\": \"(max-width: 960px) 100vw, 960px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n    \"))), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"GPU Utilization\"), \":\"), mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Query\"), \": \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"DCGM_FI_DEV_GPU_UTIL\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Legend\"), \": \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"{{modelName}} - GPU {{gpu}}\"))), mdx(\"p\", {\n    parentName: \"li\"\n  }, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"960px\"\n    }\n  }, \"\\n      \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"41.66666666666667%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABZUlEQVQoz52S2W4bMQxF/Q9t7Fm0UprNmdRO6zYYZ8ZJ3STO///QKSTEAfraB4K8XC4vIa2k2dLf7jG+ZV1qNpX5Pys1EgdW1rfURihqS6kcpXbZJ3y1az7H2v1jnznlMvHK+AZlA6Wy1F5QEqiMo7IeJZKbU2zamOPaeXQMqBByPREmfCVfGddkhZva5oYrifKSSXLOe2Rss6+d4IYm13SQzwVpJivUrkFbQXuft1ZOKK1Q+UCd1EqkdAE99JQSsW3AbjvM0OVa4QJ1iBT1B2GpGu53lvc3xc85EgfPdid0o+fuu+dub9n98DzMwuHBc7kYlmfPryXyODsOk7DdC0Y+Tk7n9lvPdOx5OgeWpeU4OZZTxzR53l5b5kX4fe55/eO4vPc8zsLLS8/5OeGO00k4zj2Fsqwq62iHb/S3B2wYabqOphszlmbEhZEva0OhGr5u0mtGbgpHpRNOvyCyLh3KxHzyXzn/4NpLbk4XAAAAAElFTkSuQmCC')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"gpu utils\",\n    \"title\": \"gpu utils\",\n    \"src\": \"/static/720e9d0bd9251196cf484065daa74781/7d769/gpu_utils.png\",\n    \"srcSet\": [\"/static/720e9d0bd9251196cf484065daa74781/5243c/gpu_utils.png 240w\", \"/static/720e9d0bd9251196cf484065daa74781/ab158/gpu_utils.png 480w\", \"/static/720e9d0bd9251196cf484065daa74781/7d769/gpu_utils.png 960w\", \"/static/720e9d0bd9251196cf484065daa74781/b43a1/gpu_utils.png 1092w\"],\n    \"sizes\": \"(max-width: 960px) 100vw, 960px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n    \"))), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"GPU Memory Usage (MB)\"), \":\"), mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Query\"), \": \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"DCGM_FI_DEV_FB_USED / 1024\"), mdx(\"span\", {\n    parentName: \"li\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"960px\"\n    }\n  }, \"\\n      \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"40%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABHElEQVQoz3VRW27DMAzLKdbEb1uKH0m7rvc/HAcpbdBi2AdBySIpBZnWfsPYH6hPHvsPuO74WjxmG3ExQaG1DWf/XstM9Jk7JuMzLkvA7OIf0Tsu5uDFRSw+He/v9XP5lKhhtgmeCSbkj6GJWSELxSiasApYe5sLQuWP0MknxmwiHBUVSoAITUhavxbZlJGvDbGvcEQaJPArqf4MDHnFYhNiY6StqkGC9ZLXRWJkQhrH3BOpNom2MmJbz6+bQmKEFME7gTZSLqOARvmfewG/tFIrZxjnj5+Sa0dugobSO2gMpNZA24ZUq3IUHs9+HH0ZQ33C4otUMcn54/pAG3dwu2GtjLHfUfs3+nZHzBU2FBiX4QKdvLgM68snQsEvvDTc5MHJJQkAAAAASUVORK5CYII=')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"gpu mem\",\n    \"title\": \"gpu mem\",\n    \"src\": \"/static/18c2649a3044e158a5942416fcea8150/7d769/gpu_mem.png\",\n    \"srcSet\": [\"/static/18c2649a3044e158a5942416fcea8150/5243c/gpu_mem.png 240w\", \"/static/18c2649a3044e158a5942416fcea8150/ab158/gpu_mem.png 480w\", \"/static/18c2649a3044e158a5942416fcea8150/7d769/gpu_mem.png 960w\", \"/static/18c2649a3044e158a5942416fcea8150/c57e6/gpu_mem.png 1075w\"],\n    \"sizes\": \"(max-width: 960px) 100vw, 960px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n    \")))), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Docker Container CPU Usage (Cores)\"), \":\"), mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Query\"), \": \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"sum(rate(container_cpu_usage_seconds_total{image!=\\\"\\\"}[5m])) by (name)\"), mdx(\"span\", {\n    parentName: \"li\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"960px\"\n    }\n  }, \"\\n      \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"52.083333333333336%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABb0lEQVQoz32RzY7bMAyE/RJN4h9JFEmJspw0KNBT7/v+jzSFJHeTBRY9fBhyOKYIePIxwVNC09Uzbmv4ltlR1+vicV1Cp3vb8HpuCZheIf8avLMELCHCiWCNjMUTFh97vTF/em355eYwzdt4ef7PZW3hvI16jWNZv+68cqXYl8+uXbgRLot/I5yM+rqN+sd8cmu4Xl/+ebMb3DZMJIy8J6SiUFPkkpBMO622UrDbHY/jF2p9otgddX+g7j9xNOoDlios3RGCYqIgUFHEGBECQURAFEFEYBZwFERmiI5Mm6kmUIxgYWjzSaBc4L1ien78hh6GjQW+odp/gBOFF+m0vs2c6pkROH7NHHP3Nh8w1T9P5Loj3SskGSQXiBVEzdB9R2octWfk2KHJEJNBrYDVepZ7v8N7xhQkQ7IhWluWQWbQbF/VDCHnU0dP+ZVvGktBIMbUBqm92jSPYNeUu+q9IrWLrSDlN+258vkdWwEFxl/BYxUY2XjcDgAAAABJRU5ErkJggg==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"cpu usage\",\n    \"title\": \"cpu usage\",\n    \"src\": \"/static/281a28a55f38b4971181c40ea9fd9870/7d769/cpu_usage.png\",\n    \"srcSet\": [\"/static/281a28a55f38b4971181c40ea9fd9870/5243c/cpu_usage.png 240w\", \"/static/281a28a55f38b4971181c40ea9fd9870/ab158/cpu_usage.png 480w\", \"/static/281a28a55f38b4971181c40ea9fd9870/7d769/cpu_usage.png 960w\", \"/static/281a28a55f38b4971181c40ea9fd9870/87339/cpu_usage.png 1440w\", \"/static/281a28a55f38b4971181c40ea9fd9870/88b03/cpu_usage.png 1920w\", \"/static/281a28a55f38b4971181c40ea9fd9870/2c3d0/cpu_usage.png 2195w\"],\n    \"sizes\": \"(max-width: 960px) 100vw, 960px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\"\n  }), \"\\n    \"))))), mdx(\"hr\", null), mdx(\"h3\", null, \"Steps to Deploy the Stack\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Prepare Files\"), \": Save the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"docker-compose.yml\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"prometheus.yml\"), \" files in the same directory.\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Start the Services\"), \": Run the following command to start the monitoring stack:\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"docker-compose up -d\\n\"))), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Access Web Interfaces\"), \":\"), mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Prometheus\"), \": Visit \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"http://<server-ip>:9090\"), \" to view raw metrics.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Grafana\"), \": Visit \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"http://<server-ip>:3000\"), \" to create and view dashboards.\"))), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Import Dashboards\"), \": Use the JSON model of your dashboard in Grafana to visualize metrics.\"))), mdx(\"hr\", null), mdx(\"h3\", null, \"Summary\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Proactive Monitoring\"), \": Monitoring both GPU and container metrics is essential for optimizing performance in ML systems.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Flexibility\"), \": The Prometheus + Grafana stack is highly customizable, making it suitable for diverse monitoring needs.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Simplicity\"), \": Using Docker Compose simplifies deployment and maintenance of the stack.\")));\n}\n;\nMDXContent.isMDXComponent = true;","excerpt":"Recently, we deployed a microservice system for a Machine Learning application to an on-premises server. During the early stages of…","timeToRead":1,"banner":null}},"pageContext":{"slug":"/prometheus-grafana-for-monitoring-mlops","formatString":"DD.MM.YYYY"}},
    "staticQueryHashes": ["2744905544","3090400250","318001574"]}